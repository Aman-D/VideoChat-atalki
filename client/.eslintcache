[{"F:\\Web development\\Freelance\\video\\client\\src\\reportWebVitals.js":"1","F:\\Web development\\Freelance\\video\\client\\src\\pages\\Client.js":"2","F:\\Web development\\Freelance\\video\\client\\src\\App.js":"3","F:\\Web development\\Freelance\\video\\client\\src\\pages\\Owner.js":"4","F:\\Web development\\Freelance\\video\\client\\src\\index.js":"5"},{"size":362,"mtime":1606643298276,"results":"6","hashOfConfig":"7"},{"size":2637,"mtime":1606665321540,"results":"8","hashOfConfig":"7"},{"size":369,"mtime":1606644236196,"results":"9","hashOfConfig":"7"},{"size":2272,"mtime":1606666201113,"results":"10","hashOfConfig":"7"},{"size":588,"mtime":1606644093992,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},"zqe2py",{"filePath":"15","messages":"16","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"19","messages":"20","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"F:\\Web development\\Freelance\\video\\client\\src\\reportWebVitals.js",[],["25","26"],"F:\\Web development\\Freelance\\video\\client\\src\\pages\\Client.js",["27","28"],"F:\\Web development\\Freelance\\video\\client\\src\\App.js",[],"F:\\Web development\\Freelance\\video\\client\\src\\pages\\Owner.js",["29"],"import React, { useEffect, useState, useRef } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nimport Peer from \"peerjs\";\r\nimport \"./style.css\";\r\n\r\nconst socket = io.connect(\"http://localhost:3001\");\r\nconst peer = new Peer();\r\n\r\nconst Owner = () => {\r\n  const [callAnswer, updateAnswer] = useState(null);\r\n  const [myId, updateMyId] = useState(null);\r\n  const [peerId, updatePeerId] = useState(null);\r\n  const myVideo = useRef();\r\n  const peerVideo = useRef();\r\n\r\n  const addVideoStream = ({ current }, stream) => {\r\n    current.srcObject = stream;\r\n    current.addEventListener(\"loadedmetadata\", () => {\r\n      current.play();\r\n    });\r\n  };\r\n\r\n  const turnOnTheVideo = () => {\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true, audio: true })\r\n      .then((stream) => {\r\n        addVideoStream(myVideo, stream);\r\n        peer.on(\"call\", (call) => call.answer(stream));\r\n        const call = peer.call(peerId, stream);\r\n        call.on(\"stream\", (userVideoStream) => {\r\n          addVideoStream(peerVideo, userVideoStream);\r\n        });\r\n        call.on(\"close\", () => peerVideo.remove());\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n  useEffect(() => {\r\n    socket.emit(\"newConnection\", { roomId: \"Room\" });\r\n\r\n    // store the peer id\r\n    peer.on(\"open\", (id) => {\r\n      console.log(\"owner id\", id);\r\n      updateMyId(id);\r\n    });\r\n\r\n    socket.on(\"callDeclined\", () => {\r\n      updateAnswer(\"Call Declined\");\r\n    });\r\n\r\n    socket.on(\"initiateTheCall\", ({ id }) => {\r\n      console.log(\"Recieved client id\", id);\r\n      updatePeerId(id);\r\n      updateAnswer(\"Call Accepted, Now begin the vide call\");\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (peerId) {\r\n      turnOnTheVideo();\r\n    }\r\n  }, [peerId]);\r\n\r\n  const makeACall = () => {\r\n    socket.emit(\"startCall\", { roomId: \"Room\", id: myId });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <button onClick={makeACall}>\r\n        {!callAnswer && <p>Call the client</p>}\r\n      </button>\r\n      <p>{callAnswer && callAnswer}</p>\r\n      <div className=\"my-video-container\">\r\n        <video ref={myVideo} className=\"my-video\"></video>\r\n        <video ref={peerVideo} className=\"peer-video\"></video>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Owner;\r\n","F:\\Web development\\Freelance\\video\\client\\src\\index.js",[],["30","31"],{"ruleId":"32","replacedBy":"33"},{"ruleId":"34","replacedBy":"35"},{"ruleId":"36","severity":1,"message":"37","line":23,"column":9,"nodeType":"38","messageId":"39","endLine":23,"endColumn":20},{"ruleId":"40","severity":1,"message":"41","line":74,"column":6,"nodeType":"42","endLine":74,"endColumn":12,"suggestions":"43"},{"ruleId":"40","severity":1,"message":"44","line":61,"column":6,"nodeType":"42","endLine":61,"endColumn":14,"suggestions":"45"},{"ruleId":"32","replacedBy":"46"},{"ruleId":"34","replacedBy":"47"},"no-native-reassign",["48"],"no-negated-in-lhs",["49"],"no-unused-vars","'connectUser' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'myId'. Either include it or remove the dependency array.","ArrayExpression",["50"],"React Hook useEffect has a missing dependency: 'turnOnTheVideo'. Either include it or remove the dependency array.",["51"],["48"],["49"],"no-global-assign","no-unsafe-negation",{"desc":"52","fix":"53"},{"desc":"54","fix":"55"},"Update the dependencies array to be: [call, myId]",{"range":"56","text":"57"},"Update the dependencies array to be: [peerId, turnOnTheVideo]",{"range":"58","text":"59"},[2094,2100],"[call, myId]",[1743,1751],"[peerId, turnOnTheVideo]"]